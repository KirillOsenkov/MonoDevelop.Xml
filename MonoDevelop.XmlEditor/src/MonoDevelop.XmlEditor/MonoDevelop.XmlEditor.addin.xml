<Addin name        = "XML Editor"
       id          = "XmlEditor"
       namespace   = "MonoDevelop"
       author      = "Matt Ward"
       copyright   = "LGPL"
       url         = "http://md-xed.sourceforge.net"
       description = "XML Editor"
       category    = "IDE extensions"
       version     = "0.6.0">
	<Runtime>
		<Import assembly="MonoDevelop.XmlEditor.dll" />
		<Import file="schemas/appconfig.xsd" />
		<Import file="schemas/MonoDevelopAddIn.xsd" />
		<Import file="schemas/readme.txt" />
		<Import file="schemas/XMLSchema.xsd" />
		<Import file="schemas/W3C-License.html" />
		<Import file="schemas/xslt.xsd" />
		<Import file="schemas/manifest.xsd" />
		<Import file="schemas/nant.xsd" />
	</Runtime>

	<Dependencies>
		<Addin id="Core" version="0.18.0"/>
		<Addin id="Core.Gui" version="0.18.0"/>
		<Addin id="Projects" version="0.18.0"/>
		<Addin id="Projects.Gui" version="0.18.0"/>
		<Addin id="Ide" version="0.18.0"/>
		<Addin id="Components" version="0.18.0"/>
		<Addin id="SourceEditor" version="0.18.0"/>
	</Dependencies>

	<!-- Defines the Xml file extension node -->
	<ExtensionPoint path = "/MonoDevelop/XmlEditor/XmlFileExtensions">
		<ExtensionNode name = "XmlFileExtension" type = "MonoDevelop.XmlEditor.XmlFileExtensionNode"/>
	</ExtensionPoint>

	<!-- Xml Editor View -->
	<Extension path = "/MonoDevelop/Ide/DisplayBindings">
		<DisplayBinding id = "XmlEditor"
		                insertbefore = "NewText"
		                supportedformats = "Text Files,Source Files"
		                class = "MonoDevelop.XmlEditor.XmlDisplayBinding"/>
	</Extension>

	<!-- File extensions that will be opened in the XML editor -->
	<Extension path = "/MonoDevelop/XmlEditor/XmlFileExtensions"
	           extension-nodes = "XmlFileExtension">
		<XmlFileExtension extension = ".build"/>
		<XmlFileExtension extension = ".config"/>
		<XmlFileExtension extension = ".stetic"/> 
		<XmlFileExtension extension = ".xml"/> 
		<XmlFileExtension extension = ".xsd"/> 
		<XmlFileExtension extension = ".xsl"/> 
		<XmlFileExtension extension = ".xslt"/> 
	</Extension>
	
	<!-- Defines the XmlTextEditorExtension
	<Extension path = "/MonoDevelop/Workbench/TextEditorExtensions">
		<Class class = "MonoDevelop.XmlEditor.XmlTextEditorExtension" />
	</Extension>
	-->
	
	<!-- Commands -->
	<Extension path = "/MonoDevelop/Ide/Commands">
		<Category _name = "XmlEditor" id="XmlEditor">
			<Command id = "MonoDevelop.XmlEditor.Commands.CreateSchema"
					defaultHandler = "MonoDevelop.XmlEditor.CreateSchemaCommand"
					_label = "Create _Schema"
					description = "Creates a schema from XML"/>
			<Command id = "MonoDevelop.XmlEditor.Commands.Validate"
					defaultHandler = "MonoDevelop.XmlEditor.ValidateXmlCommand"
					_label = "_Validate"
					description = "Validates the XML against a schema"/>
			<Command id = "MonoDevelop.XmlEditor.Commands.OpenXPathQueryPad"
					defaultHandler = "MonoDevelop.XmlEditor.OpenXPathQueryPadCommand"
					_label = "_XPath Query..."
					description = "Opens XPath Query window"/>
			<Command id = "MonoDevelop.XmlEditor.Commands.RemoveXPathHighlighting"
					defaultHandler = "MonoDevelop.XmlEditor.RemoveXPathHighlightingCommand"
					_label = "Remove XPath _Highlighting"
					description = "Removes the highlighted XPath matches."/>
			<Command id = "MonoDevelop.XmlEditor.Commands.AssignStylesheet"
					defaultHandler = "MonoDevelop.XmlEditor.AssignStylesheetCommand"
					_label = "_Assign XSLT..."
					description = "Assigns a stylesheet to the current xml document"/>
			<Command id = "MonoDevelop.XmlEditor.Commands.OpenStylesheet"
					defaultHandler = "MonoDevelop.XmlEditor.OpenStylesheetCommand"
					_label = "_Open XSLT"
					description = "Opens the assigned stylesheet"/>
			<Command id = "MonoDevelop.XmlEditor.Commands.RunXslTransform"
					defaultHandler = "MonoDevelop.XmlEditor.RunXslTransformCommand"
					_label = "Run XSL_T"
					shortcut = "Alt|Control|T"
					description = "Runs an XSL transform"/>				
			<Command id = "MonoDevelop.XmlEditor.Commands.GoToSchemaDefinition"
					defaultHandler = "MonoDevelop.XmlEditor.GoToSchemaDefinitionCommand"
					_label = "_Go to Schema Definition"
					description = "Jumps to the schema definition"/>
			<Command id = "MonoDevelop.XmlEditor.Commands.Format"
					defaultHandler = "MonoDevelop.XmlEditor.FormatXmlCommand"
					_label = "_Format"
					description = "Pretty prints the XML"/>
		</Category>
	</Extension>

	<!-- XML menu -->
	<Extension path = "/MonoDevelop/Ide/MainMenu">
		<ItemSet id = "XmlMenu" 
		         insertafter = "Run" 
		         insertbefore = "Tools" 
		         _label = "_XML" >
			<CommandItem id = "MonoDevelop.XmlEditor.Commands.CreateSchema" />
			<CommandItem id = "MonoDevelop.XmlEditor.Commands.GoToSchemaDefinition" />
			<CommandItem id = "MonoDevelop.XmlEditor.Commands.Validate" />
			<SeparatorItem id = "XPathCommandsSeparator"/>
			<CommandItem id = "MonoDevelop.XmlEditor.Commands.OpenXPathQueryPad" />				
			<CommandItem id = "MonoDevelop.XmlEditor.Commands.RemoveXPathHighlighting" />				
			<SeparatorItem id = "StylesheetCommandsSeparator"/>
			<CommandItem id = "MonoDevelop.XmlEditor.Commands.AssignStylesheet"/>
			<CommandItem id = "MonoDevelop.XmlEditor.Commands.OpenStylesheet"/>
			<CommandItem id = "MonoDevelop.XmlEditor.Commands.RunXslTransform"/>				
			<SeparatorItem id = "FormatSeparator"/>
			<CommandItem id = "MonoDevelop.XmlEditor.Commands.Format" />				
		</ItemSet>
	</Extension>
	<!-- Options panel -->
	<Extension path = "/MonoDevelop/Ide/OptionsDialogPanels">
		<DialogPanel id = "XmlEditorOptions"
		             _label = "XML Editor"
		             insertafter = "WelcomPageOptions">
			<DialogPanel id = "XmlEditorOptionsPanel"
		                 _label = "General"
		                 class = "MonoDevelop.XmlEditor.XmlEditorOptionsPanel" />
			<DialogPanel id = "XmlSchemasPanel"
		                 _label = "XML Schemas"
		                 class = "MonoDevelop.XmlEditor.XmlSchemasPanel" />
		</DialogPanel>
	</Extension>
	
	<!-- XPath Query pad -->
	<!-- Bug in the DockFrame (gitem is null but code calls SetVisible
		when visible is false) prevents us from using setting the XPathQueryPad
		to be a pad
	<Extension path = "/MonoDevelop/Ide/Pads">
		<Pad id = "MonoDevelop.XmlEditor.XPathQueryPad" 
		     class = "MonoDevelop.XmlEditor.XPathQueryPad"
		     defaultPlacement = "Bottom"
		     icon = "MonoDevelop.XmlEditor.XPathQueryPad"
		     _label = "XPath Query"/>
	</Extension>-->
	
	<!-- Put the XPath Query pad in the View menu -->
	<!--<Extension path = "/SharpDevelop/Workbench/Contexts/Edit">
		<ContextPad id = "MonoDevelop.XmlEditor.XPathQueryPad"/>
	</Extension>-->
	
	<Extension path = "/MonoDevelop/Core/StockIcons">
		<StockIcon stockid = "MonoDevelop.XmlEditor.XPathQueryPad" resource = "XPathQueryPad.png" />
	</Extension>
</Addin>
